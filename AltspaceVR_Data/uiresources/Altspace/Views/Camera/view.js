!function e(t,a,i){function o(r,c){if(!a[r]){if(!t[r]){var l="function"==typeof require&&require;if(!c&&l)return l(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+r+"'")}var s=a[r]={exports:{}};t[r][0].call(s.exports,function(e){var a=t[r][1][e];return o(a?a:e)},s,s.exports,e,t,a,i)}return a[r].exports}for(var n="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,a){Alt._,Alt.$;a.EmojiImage=React.createClass({displayName:"EmojiImage",getInitialState:function(){return{hovered:!1}},hover:function(){this.setState({hovered:!0})},unhover:function(){this.setState({hovered:!1})},render:function(){var e=this.props.imageSource,t=this.props.className;return this.state.hovered&&(t+="-hover"),React.createElement("div",{className:t,onMouseOver:this.hover,onMouseOut:this.unhover,onClick:this.props.onClick},React.createElement("img",{src:e,style:{"pointer-events":"none",width:"inherit"}}))}})},{}],2:[function(e,t,a){Alt._,Alt.$;a.HoverableImage=React.createClass({displayName:"HoverableImage",getInitialState:function(){return{hovered:!1}},hover:function(){this.setState({hovered:!0})},unhover:function(){this.setState({hovered:!1})},render:function(){var e=this.state.hovered||this.props.highlight?this.props.hoveredImageSource:this.props.unhoveredImageSource;return React.createElement("div",{className:this.props.className,onMouseOver:this.hover,onMouseOut:this.unhover,onClick:this.props.onClick},React.createElement("img",{src:e,style:{"pointer-events":"none"}}))}})},{}],3:[function(e,t,a){var i=(Alt._,Alt.$),o=e("./HoverableImage.js").HoverableImage,n=e("./EmojiImage.js").EmojiImage;Alt.CameraView=React.createClass({displayName:"CameraView",mixins:[Alt.AltspaceUrlMixin],getInitialState:function(){return{cameraIsFacingMe:!0,showLiveCameraPreview:!0,railsUrl:"",localPhotoPath:"",showSaveNotification:!1,HideFacebook:!0,HideTwitter:!0,HideGallery:!0,HideSave:!0,canvasHeight:480,canvasWidth:672,photoHeight:960,photoWidth:1344}},componentDidMount:function(){this.setStateDirectlyFromUnity=!0;var e=i("#camera-preview")[0],t=i("#captured-photo")[0],a=this;i("#camera-preview").appendTo(i("#canvas-holder")),i("#captured-photo").appendTo(i("#canvas-holder")),e.onEngineImageDataUpdated=function(i,o){if(a.state.showLiveCameraPreview){var n=e.getContext("2d"),r=t.getContext("2d");n.setTransform(2,0,0,2,0,0),r.setTransform(.1,0,0,.1,0,0),r.putImageData(o,0,0),n.drawImage(r.canvas,0,0,a.state.canvasWidth,a.state.canvasHeight)}}},onCaptureButtonClicked:function(){Alt.HtmlView.Fire("CaptureClicked",{CameraIsFacingMe:this.state.cameraIsFacingMe,PhotoWidth:this.state.photoWidth,PhotoHeight:this.state.photoHeight})},onFacebookButtonClicked:function(){Alt.HtmlView.Fire("FacebookIconClicked",{RailsUrl:this.state.railsUrl})},onTwitterButtonClicked:function(){Alt.HtmlView.Fire("TwitterIconClicked",{RailsUrl:this.state.railsUrl})},onFlipButtonClicked:function(){var e=!this.state.cameraIsFacingMe;this.setState({cameraIsFacingMe:e}),Alt.HtmlView.Fire("FlipButtonClicked",{CameraIsFacingMe:e})},onBackToCameraButtonClicked:function(){this.setState({showLiveCameraPreview:!0}),Alt.HtmlView.Fire("BackToCameraClicked",{})},SetRailsUrl:function(e){this.setState({railsUrl:e.RailsUrl,localPhotoPath:e.LocalPhotoPath})},ShowCapturedPhoto:function(e){this.setState({showLiveCameraPreview:!1});var t=new Image,a="data:image/png;base64,"+e,o=i("#camera-preview")[0],n=i("#captured-photo")[0],r=n.getContext("2d"),c=this;r.setTransform(1,0,0,1,0,0),t.onload=function(){o.getContext("2d").clearRect(0,0,c.state.canvasWidth,c.state.canvasHeight),r.drawImage(t,0,0,c.state.canvasWidth,c.state.canvasHeight)},t.src=a},computeZoomLevel:function(e,t,a){var i=e>0?1:-1,o=(a-t)/2;return parseInt(i*(e*e)/o,10)},onInputChange:function(){var e,t=i(this.state.cameraIsFacingMe?"#back-zoom-slider":"#front-zoom-slider"),a=parseInt(t.val(),10);if(this.state.cameraIsFacingMe){var o=parseInt(t.prop("min"),10),n=parseInt(t.prop("max"),10);e=this.computeZoomLevel(a,o,n)}else e=a;Alt.HtmlView.Fire("ZoomLevelAdjusted",{Zoom:e,CameraIsFacingMe:this.state.cameraIsFacingMe})},onSaveButtonClicked:function(){Alt.HtmlView.Fire("SaveButtonClicked",{})},onGalleryButtonClicked:function(){Alt.HtmlView.Fire("GalleryButtonClicked",{})},onEmojiButtonClicked:function(e){Alt.HtmlView.Fire("EmojiClicked",{EmojiIndex:e})},onCloseButtonClicked:function(){Alt.HtmlView.Fire("CloseButtonClicked",{})},render:function(){var e=this.state.HideSave?React.createElement("div",null):React.createElement("div",{id:"save-notification"},"Photo saved to ",this.state.localPhotoPath),t={};t=0==this.state.showLiveCameraPreview?React.createElement("div",{className:"inactive-camera-menu"},React.createElement("div",{className:"row"},React.createElement(o,{hoveredImageSource:"img/gallery-blue.png",unhoveredImageSource:"img/gallery-white.png",highlight:!this.state.HideGallery,className:"button gallery-button",onClick:this.onGalleryButtonClicked}),React.createElement(o,{hoveredImageSource:"img/save-blue.png",unhoveredImageSource:"img/save-white.png",highlight:!this.state.HideSave,className:"button save-button",onClick:this.onSaveButtonClicked}),React.createElement(o,{hoveredImageSource:"img/backtocam-blue.png",unhoveredImageSource:"img/backtocam-white.png",className:"button backtocam-button",onClick:this.onBackToCameraButtonClicked}),React.createElement(o,{hoveredImageSource:"img/twitter-blue.png",unhoveredImageSource:"img/twitter-white.png",highlight:!this.state.HideTwitter,className:"button twitter-button",onClick:this.onTwitterButtonClicked}),React.createElement(o,{hoveredImageSource:"img/facebook-blue.png",unhoveredImageSource:"img/facebook-white.png",highlight:!this.state.HideFacebook,className:"button facebook-button",onClick:this.onFacebookButtonClicked}))):React.createElement("div",{className:"active-camera-menu"},React.createElement(o,{hoveredImageSource:"img/gallery-blue.png",unhoveredImageSource:"img/gallery-white.png",highlight:!this.state.HideGallery,className:"button gallery-button",onClick:this.onGalleryButtonClicked}),React.createElement(o,{hoveredImageSource:"img/capture-blue.png",unhoveredImageSource:"img/capture-white.png",className:"button capture-button",onClick:this.onCaptureButtonClicked}),React.createElement(o,{hoveredImageSource:"img/flip-blue.png",unhoveredImageSource:"img/flip-white.png",className:"button flip-button",onClick:this.onFlipButtonClicked}));var a=React.createElement("div",{className:"side-div left-div",id:"emojis-div"},React.createElement(n,{imageSource:"img/smile.png",className:"button emoji-button",onClick:this.onEmojiButtonClicked.bind(this,1)}),React.createElement(n,{imageSource:"img/frown.png",className:"button emoji-button",onClick:this.onEmojiButtonClicked.bind(this,2)}),React.createElement(n,{imageSource:"img/tongue_out.png",className:"button emoji-button",onClick:this.onEmojiButtonClicked.bind(this,3)}),React.createElement(n,{imageSource:"img/heart.png",className:"button emoji-button",onClick:this.onEmojiButtonClicked.bind(this,4)}),React.createElement(n,{imageSource:"img/clap.png",className:"button emoji-button",onClick:this.onEmojiButtonClicked.bind(this,5)}),React.createElement(n,{imageSource:"img/raisehand.png",className:"button emoji-button",onClick:this.onEmojiButtonClicked.bind(this,6)})),i=React.createElement("div",{className:"side-div right-div"}),r=React.createElement("div",null);return this.state.showLiveCameraPreview&&(r=this.state.cameraIsFacingMe?React.createElement("div",{className:"slider-bar"},React.createElement("div",{className:"slider-bar-item"},"-"),React.createElement("input",{key:"back-slider",id:"back-zoom-slider",type:"range",min:"-2000",max:"2000",defaultValue:"316",onChange:this.onInputChange}),React.createElement("div",{className:"slider-bar-item"},"+")):React.createElement("div",{className:"slider-bar"},React.createElement("div",{className:"slider-bar-item"},"-"),React.createElement("input",{key:"front-slider",id:"front-zoom-slider",type:"range",min:"-30",max:"50",defaultValue:"0",onChange:this.onInputChange}),React.createElement("div",{className:"slider-bar-item"},"+"))),React.createElement("div",null,React.createElement("div",{className:"camera-view"},React.createElement("div",null,a,React.createElement("div",{id:"canvas-holder"}),i),r,e,t),React.createElement("div",{className:"close-button-row"},React.createElement(o,{hoveredImageSource:"img/camera-close-blue.png",unhoveredImageSource:"img/camera-close-white.png",className:"button close-button-bottom",onClick:this.onCloseButtonClicked})))}})},{"./EmojiImage.js":1,"./HoverableImage.js":2}]},{},[3]);